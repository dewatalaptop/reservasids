<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Reservasi Dolan Sawah</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 0;
      padding: 1rem;
      background: #f5f5f5;
    }
    h1 {
      text-align: center;
    }
    .bulan-selector {
      display: flex;
      justify-content: center;
      margin-bottom: 1rem;
    }
    .kalender {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 0.5rem;
      margin-bottom: 2rem;
    }
    .tanggal {
      background: white;
      padding: 1rem;
      text-align: center;
      cursor: pointer;
      border-radius: 5px;
      border: 1px solid #ccc;
    }
    .tanggal:hover {
      background: #def;
    }
    .peringatan {
      text-align: center;
      background: #fdd;
      color: #900;
      font-weight: bold;
      padding: 0.5rem;
      margin-bottom: 1rem;
      display: none;
    }
    .popup {
      display: none;
      position: fixed;
      top: 20%;
      left: 10%;
      width: 80%;
      background: white;
      border: 2px solid #333;
      padding: 1rem;
      z-index: 999;
      border-radius: 10px;
    }
    .popup.active {
      display: block;
    }
    .btn {
      padding: 0.5rem 1rem;
      margin: 0.5rem;
      cursor: pointer;
    }
    .form-group {
      margin-bottom: 1rem;
    }
  </style>
</head>
<body>
  <h1>Reservasi Dolan Sawah</h1>

  <div class="peringatan" id="peringatan">Kapasitas hampir penuh!</div>

  <div class="bulan-selector">
    <select id="bulan"></select>
    <select id="tahun"></select>
  </div>

  <div class="kalender" id="kalender"></div>

  <div class="popup" id="popupTanggal">
    <h3 id="tanggalDipilih"></h3>
    <button class="btn" onclick="cekReservasi()">Cek Reservasi</button>
    <button class="btn" onclick="inputReservasi()">Input Reservasi</button>
    <button class="btn" onclick="tutupPopup()">Tutup</button>
  </div>

  <script>
    const kapasitasTempat = {
      "Lantai 1": 240,
      "Lantai 2": 64,
      "Lantai 3": 112,
      "Gubug 1": 40,
      "Gubug 2": 15,
      "Gubug 3": 110
    };

    let tanggalAktif = '';
    const popup = document.getElementById("popupTanggal");
    const tanggalDipilih = document.getElementById("tanggalDipilih");
    const peringatan = document.getElementById("peringatan");

    // --- Isi dropdown bulan dan tahun ---
    const bulan = document.getElementById("bulan");
    const tahun = document.getElementById("tahun");
    const bulanNama = [
      "Januari", "Februari", "Maret", "April", "Mei", "Juni",
      "Juli", "Agustus", "September", "Oktober", "November", "Desember"
    ];

    const now = new Date();
    for (let i = 0; i < 12; i++) {
      let opt = document.createElement("option");
      opt.value = i;
      opt.textContent = bulanNama[i];
      bulan.appendChild(opt);
    }

    for (let y = now.getFullYear() - 1; y <= now.getFullYear() + 2; y++) {
      let opt = document.createElement("option");
      opt.value = y;
      opt.textContent = y;
      tahun.appendChild(opt);
    }

    bulan.value = now.getMonth();
    tahun.value = now.getFullYear();

    bulan.onchange = renderKalender;
    tahun.onchange = renderKalender;

    function renderKalender() {
      const kal = document.getElementById("kalender");
      kal.innerHTML = "";
      const bln = parseInt(bulan.value);
      const thn = parseInt(tahun.value);
      const jmlHari = new Date(thn, bln + 1, 0).getDate();

      for (let i = 1; i <= jmlHari; i++) {
        let el = document.createElement("div");
        el.className = "tanggal";
        el.textContent = i;
        el.onclick = () => pilihTanggal(i, bln, thn);
        kal.appendChild(el);
      }
    }

    function pilihTanggal(tgl, bln, thn) {
      tanggalAktif = `${thn}-${String(bln + 1).padStart(2, '0')}-${String(tgl).padStart(2, '0')}`;
      tanggalDipilih.textContent = `Tanggal ${tanggalAktif}`;
      popup.classList.add("active");
    }

    function tutupPopup() {
      popup.classList.remove("active");
    }

    function cekReservasi() {
      alert(`Cek reservasi tanggal: ${tanggalAktif} (fitur ini akan terhubung ke GitHub)`);
    }

    function inputReservasi() {
      const pwd = prompt("Masukkan password admin:");
      if (pwd === "fusion437666") {
        alert(`Input reservasi tanggal: ${tanggalAktif} (form input akan muncul di versi berikutnya)`);
      } else {
        alert("Password salah!");
      }
    }

    renderKalender();
  </script>
</body>
</html>