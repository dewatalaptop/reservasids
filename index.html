<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Reservasi Dolan Sawah</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: #f7f7f7;
    }
    header {
      background-color: #4CAF50;
      color: white;
      padding: 1em;
      text-align: center;
    }
    nav {
      display: flex;
      justify-content: space-around;
      background: #333;
      color: white;
    }
    nav button {
      flex: 1;
      padding: 1em;
      background: none;
      border: none;
      color: white;
      font-size: 1em;
      cursor: pointer;
    }
    nav button.active {
      background: #4CAF50;
    }
    section {
      display: none;
      padding: 1em;
    }
    section.active {
      display: block;
    }
    .whatsapp-button {
      background-color: #25D366;
      color: white;
      padding: 10px 20px;
      border: none;
      font-size: 1em;
      border-radius: 5px;
      cursor: pointer;
    }
  </style>
</head>
<body>

  <header>
    <h1>Reservasi Dolan Sawah</h1>
  </header>

  <nav>
    <button onclick="showTab('reservasi')">Reservasi</button>
    <button onclick="showTab('rangkuman')">Rangkuman</button>
    <button onclick="showTab('stok')">Stok</button>
    <button onclick="showTab('info')">Info Tempat</button>
  </nav>

  <section id="reservasi" class="active">
    <h2>Form Reservasi</h2>
    <!-- Form input reservasi bisa ditambahkan di sini -->
    <p>(Form reservasi tidak ditampilkan dalam contoh ini)</p>
  </section>

  <section id="rangkuman">
    <h2>Rangkuman Reservasi Bulanan</h2>
    <label for="bulan">Pilih Bulan:</label>
    <input type="month" id="bulan" onchange="tampilkanRangkuman()"/>
    <div id="hasilRangkuman"></div>
    <button class="whatsapp-button" onclick="kirimWhatsApp()">Bagikan via WhatsApp</button>
  </section>

  <section id="stok">
    <h2>Stok Perlengkapan</h2>
    <p>(Data stok bisa dimasukkan di sini)</p>
  </section>

  <section id="info">
    <h2>Info Tempat</h2>
    <p>(Info tentang tempat, kapasitas, dan fasilitas)</p>
  </section>

  <script>
    const tabButtons = document.querySelectorAll("nav button");
    const sections = document.querySelectorAll("section");

    function showTab(id) {
      sections.forEach(section => section.classList.remove("active"));
      tabButtons.forEach(button => button.classList.remove("active"));
      document.getElementById(id).classList.add("active");
      event.target.classList.add("active");
    }

    // Simulasi data di localStorage
    if (!localStorage.getItem("dataReservasi")) {
      const contohData = [
        {
          tanggal: "2025-05-03",
          nama: "Budi",
          paket: "Paket A",
          jumlah: 4,
          catatan: "Ulang tahun"
        },
        {
          tanggal: "2025-05-13",
          nama: "Siti",
          paket: "Paket B",
          jumlah: 6,
          catatan: ""
        },
        {
          tanggal: "2025-06-02",
          nama: "Andi",
          paket: "Paket C",
          jumlah: 2,
          catatan: "Pagi"
        }
      ];
      localStorage.setItem("dataReservasi", JSON.stringify(contohData));
    }

    function tampilkanRangkuman() {
      const bulan = document.getElementById("bulan").value;
      const data = JSON.parse(localStorage.getItem("dataReservasi") || "[]");
      const hasil = document.getElementById("hasilRangkuman");
      hasil.innerHTML = "";

      if (!bulan) {
        hasil.innerHTML = "<p>Silakan pilih bulan terlebih dahulu.</p>";
        return;
      }

      const dataBulan = data.filter(item => item.tanggal.startsWith(bulan));
      if (dataBulan.length === 0) {
        hasil.innerHTML = "<p>Tidak ada reservasi di bulan ini.</p>";
        return;
      }

      let html = "<ul>";
      dataBulan.forEach(item => {
        html += `<li><b>${item.tanggal}</b>: ${item.nama} (${item.jumlah} org) - ${item.paket}${item.catatan ? " - " + item.catatan : ""}</li>`;
      });
      html += "</ul>";
      hasil.innerHTML = html;
    }

    function kirimWhatsApp() {
      const bulan = document.getElementById("bulan").value;
      const data = JSON.parse(localStorage.getItem("dataReservasi") || "[]");

      if (!bulan) {
        alert("Silakan pilih bulan terlebih dahulu.");
        return;
      }

      const dataBulan = data.filter(item => item.tanggal.startsWith(bulan));
      if (dataBulan.length === 0) {
        alert("Tidak ada data untuk bulan tersebut.");
        return;
      }

      let pesan = `*Rangkuman Reservasi Dolan Sawah*\nBulan: ${bulan}\n\n`;
      dataBulan.forEach(item => {
        pesan += `â€¢ ${item.tanggal}: ${item.nama} (${item.jumlah} org) - ${item.paket}`;
        if (item.catatan) pesan += ` - ${item.catatan}`;
        pesan += `\n`;
      });

      const encodedPesan = encodeURIComponent(pesan);
      const url = `https://wa.me/?text=${encodedPesan}`;
      window.open(url, "_blank");
    }
  </script>

</body>
</html>